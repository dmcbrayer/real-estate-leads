<div class="container">
  <h1>Goodbye World</h1>

  <%= form_tag('/map', method: :get) do %>
    <%= text_field_tag :address %>
    <%= hidden_field_tag :latitude, id: "latitude" %>
    <%= hidden_field_tag :longitude, id: "longitude" %>
    <%= submit_tag("Go") %>
  <% end %>

</div>

<script>

  var initAutocomplete = function() {
    autocomplete = new google.maps.places.Autocomplete(
      (document.getElementById('address')),
      {types: ['geocode']});

    google.maps.event.addListener(autocomplete, 'place_changed', function() {
      var place = autocomplete.getPlace().geometry.location;
      var lat = place.lat();
      var lng = place.lng();
      $('#latitude').val(lat);
      $('#longitude').val(lng); 
    });
  };

  $(document).on('ready', initAutocomplete);
</script>





